(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[35],{379:function(e,t,n){"use strict";n(80),n(457)},382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(552).Row;t.default=a},684:function(e,t,n){},685:function(e,t,n){e.exports=n.p+"static/media/abp-logo-long.348dee44.png"},686:function(e,t,n){e.exports=n.p+"static/media/microsoft.0502e763.svg"},733:function(e,t,n){"use strict";n.r(t);n(458);var a,o,r=n(459),c=n.n(r),s=(n(163),n(111)),i=n.n(s),l=(n(379),n(382)),u=n.n(l),p=(n(359),n(360)),m=n.n(p),d=n(2),g=n.n(d),h=n(4),f=n(7),x=n(13),b=n(103),v=n(102),y=(n(684),n(1)),w=n(69),S=n(685),E=n.n(S),k=n(686),j=n.n(k),A=n(34),N=n(16),O=n(116),T=n(121),P=n(29),z={scopes:["openid","User.Read"],state:"12345",prompt:"select_account"},R={scopes:["openid","User.Read"]},_=Object(w.b)(O.a.AuthenticationStore,O.a.SessionStore,O.a.AccountStore)(a=Object(w.c)(a=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,loading1:!1},e.handleSubmit=function(){var t=Object(h.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.props.form.validateFields(function(){var t=Object(h.a)(g.a.mark((function t(n,a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=4;break}return e.setState({loading:!0}),t.next=4,e.props.authenticationStore.login(a).then(function(){var t=Object(h.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!1}),console.log("login request",a),console.log("login response",n),t.t0=console,t.next=6,abp.session;case 6:t.t1=t.sent,t.t0.log.call(t.t0,"abp session value after login",t.t1),console.log(e.props.location),console.log("href",window.location.href),window.location.href=""+P.a.appVirtualDirectoryPath;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.setState({loading:!1})}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.azureSignIn=function(){e.setState({loading1:!0}),T.a.loginPopup(z).then((function(t){return e.handleResponse(t)})).catch((function(t){console.error(t),e.setState({loading1:!1})}))},e.handleResponse=function(){var t=Object(h.a)(g.a.mark((function t(n){var a,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!==n?(console.log(n),o=n.account.userName,T.a.acquireTokenPopup(R).then((function(e){console.log(e),console.log("access_token",e.accessToken),localStorage.setItem("azureToken",e.accessToken),localStorage.setItem("expiresOn",e.expiresOn.toString()),console.log("username",e.account.userName),a={userNameOrEmailAddress:o,password:e.accessToken,useAzureAD:!0}})).then(function(){var t=Object(h.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.authenticationStore.login(a);case 2:e.setState({loading1:!1}),window.location.href=""+P.a.appVirtualDirectoryPath;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.error(t),e.setState({loading1:!1})})),console.log(o)):e.selectAccount();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectAccount=function(){var e=T.a.getAllAccounts();null!==e&&(e.length>1?console.warn("Multiple accounts detected."):1===e.length&&(o=e[0],console.log(o)))},e}return Object(x.a)(n,[{key:"render",value:function(){console.log("Login Page : abp session value after login",abp.session);var e=(this.props.location.state||{from:{pathname:"/"}}).from;return console.log("Authentication Store",this.props.authenticationStore),console.log("Authenticated status",this.props.authenticationStore.isAuthenticated),this.props.authenticationStore.isAuthenticated?y.createElement(N.a,{to:e}):y.createElement("div",{className:"d-md-flex h-md-100 align-items-center"},y.createElement("div",{className:"col-md-6 p-0 bg-indigo h-md-100 login-box"},y.createElement("div",{className:"text-white d-md-flex align-items-center h-100 text-center justify-content-center"},y.createElement("div",{className:"container-fluid",style:{backgroundColor:"#111d2c",height:"100vh"}}))),y.createElement("div",{className:"col-md-6 p-0 bg-white h-md-100 loginarea"},y.createElement("div",{className:"d-md-flex align-items-center h-md-100 justify-content-center"},y.createElement(c.a,{className:"",onSubmit:this.handleSubmit},y.createElement(u.a,{style:{marginTop:10}},y.createElement(m.a,null,y.createElement("img",{src:E.a,alt:"arcelor logo",className:"mx-auto d-block",style:{width:"42%",marginLeft:"30px"}}))),y.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},y.createElement("h1",null,Object(A.a)("Holiday Approval System"))),y.createElement(u.a,{style:{marginTop:10,textAlign:"center"}},y.createElement(m.a,null,y.createElement("div",{className:"login-border-box"},y.createElement("div",{style:{marginTop:"30px",fontSize:"17px"}},y.createElement("small",{className:"text-muted"},"Popup blockers interfere with the operation of this application.Please disable your popup blocker."),y.createElement("div",{style:{marginTop:"30px"}},y.createElement("small",{className:"text-muted"},"Please click the 'Login' button to continue."))),y.createElement(i.a,{loading:this.state.loading1,onClick:this.azureSignIn,style:{color:"white",marginTop:"50px",marginBottom:"50px",height:"65px",width:"215px",fontSize:"20px"},type:"primary"},y.createElement("img",{src:j.a,style:{width:"14px",marginRight:"5px"}}),"Login")))))),y.createElement(u.a,{className:"footnote"},"Powered by"," ",y.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://untanglestrategy.com/"},y.createElement("span",{className:"text-danger"},"Untangle"),y.createElement("span",{style:{color:"grey"}},"_")))))}}]),n}(y.Component))||a)||a;t.default=c.a.create()(_)}}]);